<!--

    Copyright 2014 Jai Veeraswami.
    All rights reserved.

    Ranchero 1.0.0.001
    Release Notes
    - Initial Development
    Known Bugs
    - 
    To Do List
    - Consider removing 'save changes'
      button in favor of auto-save
      functionality
    Bug Fixes
    - None
    Improvements
    - None
    
-->

<!DOCTYPE html>
<html>
<head>
    
    <!-- Document Title -->
    <title> Mule Tracker - Release 1.0.0.001 </title>

    <!-- StyleSheet Import -->
    <link rel="stylesheet" href="styles.css"/>
    <link rel="stylesheet" href="blocks.css"/>

    <!-- JavaScript Import -->
    <script type="text/javascript" src="engine.js"></script>

</head>
<body>
    
    <sector name="PROJECTRANCHERO">
        <div id="mules-interface" class="noselect">
            <div id="left-interface-lighter-panel">
                <div id="left-interface-window-title-group">
                    <div id="left-interface-window-title-heavy">Mule Tracker</div>
                    <div id="left-interface-window-title-light">by Redwindon</div>
                </div>
                <div id="left-interface-window-mule-list"></div>
                <div id="create-mule-button">new mule</div>
                <div id="attribution">Designed by Jai in California</div>
            </div>
            <div id="right-interface-darker-panel">
                <div id="right-interface-window-title-group">
                    <span id="right-interface-window-title-heavy"></span>
                    <span id="right-interface-window-title-light"></span>
                </div>
                <div id="right-interface-window-left-di-list">
                    <div id="right-interface-window-left-di-list-item">
                        <div id="right-interface-window-left-di-list-item-label">Email:</div>
                        <input id="right-interface-window-left-di-list-item-input-email" value="N/A">
                        <div id="di-list-item-action-button">copy</div>
                    </div>
                    <div id="right-interface-window-left-di-list-item">
                        <div id="right-interface-window-left-di-list-item-label">Password:</div>
                        <input id="right-interface-window-left-di-list-item-input-password" value="N/A">
                        <div id="di-list-item-action-button">copy</div>
                    </div>
                </div>
                <div id="right-interface-window-right-di-list">
                    <div id="right-interface-window-right-di-list-item">
                        <div id="right-interface-window-right-di-list-item-label">Slots Available:</div>
                        <output id="right-interface-window-right-di-list-item-output-available">N/A</output>
                    </div>
                    <div id="right-interface-window-right-di-list-item">
                        <div id="right-interface-window-right-di-list-item-label">Slots Used:</div>
                        <output id="right-interface-window-right-di-list-item-output-used">N/A</output>
                    </div>
                </div>
                <div id="right-interface-window-storage">
                    <div id="block-container">
                        <div class="slot occupied">
                            
                            <div class="block bows_UT_DOOMBOW">
        
                                <div class="pixel x6y0"></div>
                                <div class="pixel x7y0"></div>

                                <div class="pixel x5y1"></div>
                                <div class="pixel x7y1"></div>

                                <div class="pixel x4y2"></div>
                                <div class="pixel x7y2"></div>

                                <div class="pixel x3y3"></div>
                                <div class="pixel x6y3"></div>
                                <div class="pixel x7y3"></div>

                                <div class="pixel x2y4"></div>
                                <div class="pixel x4y4"></div>
                                <div class="pixel x5y4"></div>

                                <div class="pixel x1y5"></div>
                                <div class="pixel x4y5"></div>
                                <div class="pixel x5y5"></div>

                                <div class="pixel x0y6"></div>
                                <div class="pixel x3y6"></div>

                                <div class="pixel x0y7"></div>
                                <div class="pixel x1y7"></div>
                                <div class="pixel x2y7"></div>
                                <div class="pixel x3y7"></div>
                                
                            </div>
                            
                        </div>
                        <div class="slot"></div>
                        <div class="slot"></div>
                        <div class="slot"></div>
                        <div class="slot"></div>
                        <div class="slot"></div>
                        <div class="slot"></div>
                        <div class="slot"></div>
                        <div class="slot"></div>
                        <div class="slot"></div>
                        <div class="slot"></div>
                        <div class="slot"></div>
                        <div class="slot"></div>
                        <div class="slot"></div>
                        <div class="slot"></div>
                        <div class="slot"></div>
                    </div>
                </div>
                <div id ="retain-mule-button">save changes</div>
                <div id ="delete-mule-button">delete mule</div>
            </div>
        </div> <!-- mules window interface -->
        <div id="block-interface">
        
        </div> <!-- block module interface -->
    </sector> <!-- DOM construction -->
    <script type="text/javascript">
        
        /* Mutable Global Variables */
        var MULES = new ObjectLibrary('MULES');
        
            var mule1 = new PropertyStore();
            mule1.setProp(mule1, 'name', 'xHowl');
            mule1.setProp(mule1, 'slots_filled', 7);
            mule1.setProp(mule1, 'slots_empty', 9);
            mule1.setProp(mule1, 'email', 'jaiwvee@gmail.com');
            mule1.setProp(mule1, 'password', 'brisingr21472147');
            mule1.setProp(mule1, 'blocks', {
                DOOMBOW: 1,
                CORALBOW: 1,
                POTIONOFLIFE: 32
            });
            MULES.addItem(mule1);
            var mule2 = new PropertyStore();
            mule2.setProp(mule2, 'name', 'JoeEimer');
            mule2.setProp(mule2, 'slots_filled', 48);
            mule2.setProp(mule2, 'slots_empty', 27);
            mule2.setProp(mule2, 'email', 'rotmg.account@web.de');
            mule2.setProp(mule2, 'password', 'brisingr2147');
            mule2.setProp(mule2, 'blocks', {
                POTIONOFSPEED: 17,
                POTIONOFMANA: 12
            });
            MULES.addItem(mule2);
            //MULES.reset();
            //console.log(MULES);
        
        /* Immutable Global Variables */
        
    </script> <!-- global variables -->
    
    <script type="text/javascript">
        
        /* Immutable Global Functions */
        function DOMInjectMuleList() {
            
            // Empty the container
            (function () {
                document.getElementById('left-interface-window-mule-list').innerHTML = '';
            }());
            
            // Append the mules
            (function () {
                var litem_node, name_node, count_node, name, count;
                for (var i = 0; i < MULES.size; i++) {
                    mule = MULES.getItem(i);
                    litem_node = document.createElement('div');
                    name_node = document.createElement('div');
                    count_node = document.createElement('div');
                    litem_node.id = 'left-interface-window-mule-list-item';
                    name_node.id = 'left-interface-window-mule-list-item-name';
                    count_node.id = 'left-interface-window-mule-list-item-count';
                    litem_node.classList.add('left-interface-window-mule-list-item');
                    name_node.classList.add('left-interface-window-mule-list-item-name');
                    count_node.classList.add('left-interface-window-mule-list-item-count');
                    name_node.innerText = mule.name;
                    count_node.innerText = mule.slots_filled;
                    litem_node.appendChild(name_node);
                    litem_node.appendChild(count_node);
                    if (i === 0) {
                        litem_node.classList.add('selected');
                        document.getElementById('right-interface-window-title-heavy').innerText = mule.name;
                        document.getElementById('right-interface-window-title-light').innerHTML = '&ndash; ' + mule.slots_empty + ' slots available';
                        document.getElementById('right-interface-window-left-di-list-item-input-email').value = mule.email;
                        document.getElementById('right-interface-window-left-di-list-item-input-password').value = mule.password;
                        document.getElementById('right-interface-window-right-di-list-item-output-available').value = mule.slots_empty;
                        document.getElementById('right-interface-window-right-di-list-item-output-used').value = mule.slots_filled;
                    }
                    document.getElementById('left-interface-window-mule-list').appendChild(litem_node);
                }
            }());
            
            // Define callbacks
            (function () {
                function muleListItemButtonCallback() {
                    var items = Array.prototype.slice.call(document.getElementById('left-interface-window-mule-list').children);
                    if (event.target.id === 'left-interface-window-mule-list-item-name') {
                        document.getElementsByClassName('selected')[0].classList.remove('selected');
                        var item = event.target.parentNode;
                        var index = items.indexOf(event.target.parentNode);
                        event.target.parentNode.classList.add('selected');
                    } else if (event.target.id === 'left-interface-window-mule-list-item') {
                        document.getElementsByClassName('selected')[0].classList.remove('selected');
                        var item = event.target;
                        var index = items.indexOf(event.target);
                        event.target.classList.add('selected');
                    } else {
                        return;
                    }
                    MULES.setProp(MULES, 'flag', index);
                    var mule = new PropertyStore();
                    mule.importItem(mule, MULES.getItem(index));
                    document.getElementById('right-interface-window-title-heavy').innerText = mule.name;
                    document.getElementById('right-interface-window-title-light').innerHTML = '&ndash; ' + mule.slots_empty + ' slots available';
                    document.getElementById('right-interface-window-left-di-list-item-input-email').value = mule.email;
                    document.getElementById('right-interface-window-left-di-list-item-input-password').value = mule.password;
                    document.getElementById('right-interface-window-right-di-list-item-output-available').value = mule.slots_empty;
                    document.getElementById('right-interface-window-right-di-list-item-output-used').value = mule.slots_filled;
                }
                muleListItemButtonResponders = new InputResponders(document.getElementsByClassName('left-interface-window-mule-list-item'));
                muleListItemButtonResponders.setCatalyst('click');
                muleListItemButtonResponders.setCallback(muleListItemButtonCallback);
                muleListItemButtonResponders.activate();
            }());
        }
        
        
        // AUTO-CALL FOR TESTING ONLY:
          DOMInjectMuleList();
        
        
        function reloadUI($song) {

            var song = new SongMetadataStore();
            song.importSong($song);

            document.getElementById('song-title').innerText = song.title;
            document.getElementById('song-artist').innerText = song.artist;
            document.getElementById('prev').classList.remove('disabled');
            document.getElementById('next').classList.remove('disabled');
            document.getElementById('program').style.display = 'none';
            document.getElementById('version').style.display = 'none';
            document.getElementById('tracer').style.display = 'block';
            document.getElementById('song-elapsed-numericator').style.display = 'block';
            document.getElementById('song-length-numericator').style.display = 'block';

        } // sample; not used in this project

    </script> <!-- global functions -->
    <script type="text/javascript">

        /* Load Preparation */
        (function () {

            // ... e.g. muleStore.sortBy('name'); & appendUIMules();

        }());

        /* Input Responders */
        (function () {

            // Input Response Instancializers    
            var createMuleButtonResponder = new InputResponder(document.getElementById('create-mule-button')); // (1)
            var retainMuleButtonResponder = new InputResponder(document.getElementById('retain-mule-button')); // (2)
            var deleteMuleButtonResponder = new InputResponder(document.getElementById('delete-mule-button')); // (3)

            // Input Response Callback Methods
            function createMuleButtonCallback() {

                // Create new mule entry in sidebar
                // Listen for 'enter' keypress; mule name is editable until 'enter' key is heard
                // Add mule to unsynced localStorage variable, then sync it

            } // (1)
            function retainMuleButtonCallback() {

                // Possibly remove this in favor of autosave
                // Get the current 'muleStore' variable (or whatever is used for unsynced changes)
                // And save it with the current data from current right and left window panes.

            } // (2)
            function deleteMuleButtonCallback() {

                // Get the index of the current mule from the .selected in sidebar
                // Make sure user is sure! Remove that index from the unsynced 'muleStore' variable
                // Remove the content from the active right-window fields; remove entry from left-window
                // Sync with localStorage

            } // (3)

            // Input Response Catalysts
            createMuleButtonResponder.setCatalyst('click'); // (1)
            retainMuleButtonResponder.setCatalyst('click'); // (2)
            deleteMuleButtonResponder.setCatalyst('click'); // (3)

            // Input Response Callback Assigners
            createMuleButtonResponder.setCallback(createMuleButtonCallback); // (1)
            retainMuleButtonResponder.setCallback(retainMuleButtonCallback); // (2)
            deleteMuleButtonResponder.setCallback(deleteMuleButtonCallback); // (3)

            // Input Response Activators
            createMuleButtonResponder.activate(); // (1)
            retainMuleButtonResponder.activate(); // (2)
            deleteMuleButtonResponder.activate(); // (3)

        }());

    </script> <!-- applicate engine -->
    
      <!-- Block Standard Template

        <div class="pixel x0y0"></div>
        <div class="pixel x1y0"></div>
        <div class="pixel x2y0"></div>
        <div class="pixel x3y0"></div>
        <div class="pixel x4y0"></div>
        <div class="pixel x5y0"></div>
        <div class="pixel x6y0"></div>
        <div class="pixel x7y0"></div>

        <div class="pixel x0y1"></div>
        <div class="pixel x1y1"></div>
        <div class="pixel x2y1"></div>
        <div class="pixel x3y1"></div>
        <div class="pixel x4y1"></div>
        <div class="pixel x5y1"></div>
        <div class="pixel x6y1"></div>
        <div class="pixel x7y1"></div>

        <div class="pixel x0y2"></div>
        <div class="pixel x1y2"></div>
        <div class="pixel x2y2"></div>
        <div class="pixel x3y2"></div>
        <div class="pixel x4y2"></div>
        <div class="pixel x5y2"></div>
        <div class="pixel x6y2"></div>
        <div class="pixel x7y2"></div>

        <div class="pixel x0y3"></div>
        <div class="pixel x1y3"></div>
        <div class="pixel x2y3"></div>
        <div class="pixel x3y3"></div>
        <div class="pixel x4y3"></div>
        <div class="pixel x5y3"></div>
        <div class="pixel x6y3"></div>
        <div class="pixel x7y3"></div>

        <div class="pixel x0y4"></div>
        <div class="pixel x1y4"></div>
        <div class="pixel x2y4"></div>
        <div class="pixel x3y4"></div>
        <div class="pixel x4y4"></div>
        <div class="pixel x5y4"></div>
        <div class="pixel x6y4"></div>
        <div class="pixel x7y4"></div>

        <div class="pixel x0y5"></div>
        <div class="pixel x1y5"></div>
        <div class="pixel x2y5"></div>
        <div class="pixel x3y5"></div>
        <div class="pixel x4y5"></div>
        <div class="pixel x5y5"></div>
        <div class="pixel x6y5"></div>
        <div class="pixel x7y5"></div>

        <div class="pixel x0y6"></div>
        <div class="pixel x1y6"></div>
        <div class="pixel x2y6"></div>
        <div class="pixel x3y6"></div>
        <div class="pixel x4y6"></div>
        <div class="pixel x5y6"></div>
        <div class="pixel x6y6"></div>
        <div class="pixel x7y6"></div>

        <div class="pixel x0y7"></div>
        <div class="pixel x1y7"></div>
        <div class="pixel x2y7"></div>
        <div class="pixel x3y7"></div>
        <div class="pixel x4y7"></div>
        <div class="pixel x5y7"></div>
        <div class="pixel x6y7"></div>
        <div class="pixel x7y7"></div>

      End Block Standard Template -->
    
</body>
</html>